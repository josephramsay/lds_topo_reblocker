language: python
python:
  - "2.7"
  - "3.5"

services:
  - postgresql
  
#addons:
#  postgresql: "9.6"
  
install:
  #- sudo apt-get install postgis
  - sudo apt-get install libgdal-dev libgdal1h
  - pip install --global-option=build_ext --global-option="-I/usr/include/gdal" GDAL==`gdal-config --version`
  - pip install -r requirements.txt

before_script:
  - psql -c "create database test_db;" -U postgres
  - psql -c "create user test_user with password 'test_password';" -U postgres
  - psql -c "grant all privileges on database test_db to test_user;" -U postgres
  - psql -c "create extension postgis;" -U postgres

script: 
  - python test/testsuite.py